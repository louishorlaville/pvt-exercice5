(this["webpackJsonpex5-signets"]=this["webpackJsonpex5-signets"]||[]).push([[0],{166:function(e,t,n){},167:function(e,t,n){},168:function(e,t,n){},184:function(e,t,n){},185:function(e,t,n){},188:function(e,t,n){},295:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(14),s=n.n(c),i=(n(166),n(36)),o=n(25),l=n(17),u=(n(167),n(168),n(352)),d=n(332),j=n(9),b=n(137),p=(n(297),n(107),{apiKey:"AIzaSyCNoBew2DQyWGQigE_yW5RxPs6H5NA_NhE",authDomain:"pvt-h21-lh.firebaseapp.com",databaseURL:"https://pvt-h21-lh-default-rtdb.firebaseio.com",projectId:"pvt-h21-lh",storageBucket:"pvt-h21-lh.appspot.com",messagingSenderId:"451415435455",appId:"1:451415435455:web:1ea9e3d2143271ab707e0a"}),h="utilisateurs-ex5",m="dossiers";j.a.apps.length||j.a.initializeApp(p);var f=j.a.auth(),O=new b.a.AuthUI(f),x=j.a.firestore();n(177);function v(e){f.onAuthStateChanged((function(t){var n,a,r;e(t),t&&(n=t.uid,a=t.displayName,r=t.email,x.collection(h).doc(n).set({nom:a,courriel:r,datecompte:j.a.firestore.FieldValue.serverTimestamp()},{merge:!0}))}))}var g=n(7);function N(e){var t=e.utilisateur;return Object(g.jsxs)("header",{className:"Entete",children:[Object(g.jsxs)("div",{className:"logo",children:["Signets",Object(g.jsx)(d.a,{variant:"outlined",size:"small",className:"btn-deconnexion",onClick:function(){f.signOut()},children:"D\xe9connexion"})]}),Object(g.jsxs)("div",{className:"utilisateur",children:[t.displayName," ",Object(g.jsx)(u.a,{className:"avatar",alt:t.displayName,src:t.photoURL})]})]})}var y=n(27),C=n.n(y),D=n(47),A=(n(184),n(185),n(336)),k=n(148),w=n(348),S=n(140),I=n.n(S),E=n(141),F=n.n(E),R=n.p+"static/media/couverture.2dc9ece9.webp";function B(e){var t=e.id,n=e.nom,r=e.couleur,c=e.datemodif,s=e.couverture,i=e.gererSupprimer,o=Object(a.useState)(null),u=Object(l.a)(o,2),d=u[0],j=u[1];function b(){j(null)}return Object(g.jsxs)("article",{className:"Dossier",style:{backgroundColor:r},children:[Object(g.jsxs)("div",{className:"couverture",children:[Object(g.jsx)(A.a,{className:"deplacer","aria-label":"d\xe9placer",disableRipple:!0,children:Object(g.jsx)(I.a,{})}),Object(g.jsx)("img",{src:s||R,alt:n})]}),Object(g.jsxs)("div",{className:"info",children:[Object(g.jsx)("h2",{children:n}),Object(g.jsxs)("p",{children:["Modifi\xe9 : ",T(c)]})]}),Object(g.jsx)(A.a,{id:t,className:"modifier","aria-label":"modifier",size:"small","aria-haspopup":"true","aria-controls":"maj-dossier",onClick:function(e){j(e.currentTarget)},children:Object(g.jsx)(F.a,{})}),Object(g.jsxs)(k.a,{id:"maj-dossier",anchorEl:d,keepMounted:!0,open:Boolean(d),onClose:b,children:[Object(g.jsx)(w.a,{onClick:b,children:"Modifier"}),Object(g.jsx)(w.a,{onClick:function(){i(t),b()},children:"Supprimer"})]})]})}function T(e){var t=e?new Date(1e3*e.seconds):new Date;return"".concat(t.getDate()," ").concat(["janvier","f\xe9vrier","mars","avril","mai","juin","juillet","ao\xfbt","septembre","octobre","novembre","d\xe9cembre"][t.getMonth()]," ").concat(t.getFullYear())}function V(){return(V=Object(D.a)(C.a.mark((function e(t,n){var a;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.datemodif=j.a.firestore.FieldValue.serverTimestamp(),e.next=3,x.collection(h).doc(t).collection(m).add(n);case 3:return a=e.sent,e.abrupt("return",a.get());case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function P(){return(P=Object(D.a)(C.a.mark((function e(t,n){var a;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(n),a=[],e.next=4,x.collection(h).doc(t).collection(m).orderBy(n[0],n[1]).get();case 4:return e.sent.forEach((function(e){a.push(Object(i.a)({id:e.id},e.data()))})),e.abrupt("return",a);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function W(e,t){return z.apply(this,arguments)}function z(){return(z=Object(D.a)(C.a.mark((function e(t,n){return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x.collection(h).doc(t).collection(m).doc(n).delete();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function M(e){var t=e.utilisateur,n=e.etatDossiers,r=e.etatTri,c=Object(l.a)(n,2),s=c[0],u=c[1],d=Object(l.a)(r,2),j=d[0];d[1];function b(e){return p.apply(this,arguments)}function p(){return(p=Object(D.a)(C.a.mark((function e(n){return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:W(t.uid,n).then((function(){var e=Object(o.a)(s).filter((function(e){return e.id!==n}));u(e)})).catch((function(e){return console.log("\xc9chec de la suppression - Firestore a r\xe9pondu :",e.message)}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(a.useEffect)((function(){(function(e,t){return P.apply(this,arguments)})(t.uid,j).then((function(e){return u(e)}),console.log(j))}),[j]),Object(g.jsx)(g.Fragment,{children:Object(g.jsx)("ul",{className:"ListeDossiers",children:s.length>0?s.map((function(e){return Object(g.jsx)("li",{children:Object(g.jsx)(B,Object(i.a)(Object(i.a)({},e),{},{gererSupprimer:b}))},e.id)})):Object(g.jsxs)("li",{className:"msgAucunDossier",children:["Votre liste de dossiers est vide",Object(g.jsx)("p",{children:";-("})]})})})}var _=n(344),G=n(146),L=n.n(G);n(188);function U(){return Object(a.useEffect)((function(){return e="#firebaseui-widget",void O.start(e,{signInOptions:[j.a.auth.GoogleAuthProvider.PROVIDER_ID,j.a.auth.FacebookAuthProvider.PROVIDER_ID,j.a.auth.GithubAuthProvider.PROVIDER_ID],signInFlow:"popup"});var e}),[]),Object(g.jsxs)("div",{className:"Accueil",children:[Object(g.jsxs)("h3",{className:"logo",children:["Signets ",Object(g.jsx)("span",{children:"beta"})]}),Object(g.jsxs)("h2",{className:"amorce",children:["Organisez vos signets Web, ",Object(g.jsx)("br",{}),"Simple comme bonjour !"]}),Object(g.jsx)("h4",{className:"connexion-etiquette",children:"Connexion \xe0 Signets"}),Object(g.jsx)("div",{id:"firebaseui-widget"})]})}var J=n(351),Q=n(347),q=n(342),H=n(338),K=n(350),Y=n(147);function X(e){var t=e.ouvert,n=e.setOuvert,r=e.gererAjout,c=Object(a.useState)(""),s=Object(l.a)(c,2),i=s[0],o=s[1],u=Object(a.useState)(""),j=Object(l.a)(u,2),b=j[0],p=j[1],h=Object(a.useState)("#537169"),m=Object(l.a)(h,2),f=m[0],O=m[1];function x(){o(""),p(""),O("#537169")}return Object(g.jsx)("div",{className:"AjouterDossier",children:Object(g.jsxs)(Q.a,{open:t,onClose:function(){return n(!1)},"aria-labelledby":"form-dialog-title",children:[Object(g.jsx)(K.a,{id:"form-dialog-title",children:"Ajouter un dossier"}),Object(g.jsxs)(H.a,{children:[Object(g.jsx)(J.a,{autoFocus:!0,margin:"dense",id:"nomDossier",label:"Nom du dossier",type:"text",fullWidth:!0,onChange:function(e){return o(e.target.value)},defaultValue:i}),Object(g.jsx)(J.a,{margin:"normal",id:"urlImage",label:"Adresse de l'image de couverture",type:"text",fullWidth:!0,onChange:function(e){return p(e.target.value)},defaultValue:b}),Object(g.jsx)(Y.a,{width:"100%",triangle:"hide",colors:["#537169","#55BBB2","#F6D2A3","#F3D379","#FB7778","#5990B8"],onChangeComplete:function(e,t){return O(e.hex)},color:f})]}),Object(g.jsxs)(q.a,{children:[Object(g.jsx)(d.a,{style:{backgroundColor:"#900",color:"#fff",margin:"15px 0"},onClick:function(){n(!1),x()},variant:"contained",children:"Annuler"}),Object(g.jsx)(d.a,{style:{backgroundColor:"#090",color:"#fff",margin:"15px"},className:"btnAjouter",onClick:function(){""!==i&&r(i,b,f),x()},variant:"contained",children:"Ajouter"})]})]})})}var Z=n(346),$=n(341),ee=n(349),te=n(343);function ne(){var e=Object(a.useState)(["datemodif","desc","datemodif"]),t=Object(l.a)(e,2),n=t[0],r=t[1],c=Object(te.a)((function(e){return{formControl:{margin:e.spacing(1),minWidth:120},selectEmpty:{marginTop:e.spacing(2)}}}))(),s=Object(a.useState)(null),u=Object(l.a)(s,2),d=u[0],j=u[1],b=Object(a.useState)([]),p=Object(l.a)(b,2),h=p[0],m=p[1],f=Object(a.useState)(!1),O=Object(l.a)(f,2),x=O[0],y=O[1];return Object(a.useEffect)((function(){return v(j)}),[]),Object(g.jsx)("div",{className:"Appli",children:d?Object(g.jsxs)(g.Fragment,{children:[Object(g.jsx)(N,{utilisateur:d}),Object(g.jsxs)("section",{className:"contenu-principal",children:[Object(g.jsxs)($.a,{className:c.formControl+" menuTri",children:[Object(g.jsx)(ee.a,{shrink:!0,id:"demo-simple-select-placeholder-label-label",children:"Tri des dossiers"}),Object(g.jsxs)(Z.a,{value:n[2],onChange:function(e){var t=null,n="";e.target.value.includes("asc")||e.target.value.includes("desc")?(n="nom",t=e.target.value.includes("asc")?"asc":"desc"):n=e.target.value,r([n,t,e.target.value])},className:c.selectEmpty,children:[Object(g.jsx)(w.a,{value:"datemodif",children:"Date de modification descendante"}),Object(g.jsx)(w.a,{value:"nom-asc",children:"Nom de dossier ascendant"}),Object(g.jsx)(w.a,{value:"nom-desc",children:"Nom de dossier descendant"})]})]}),Object(g.jsx)(M,{utilisateur:d,etatDossiers:b,etatTri:e}),Object(g.jsx)(X,{ouvert:x,setOuvert:y,gererAjout:function(e,t,n){var a={nom:e,couverture:t,couleur:n,signets:[]};(function(e,t){return V.apply(this,arguments)})(d.uid,a).then((function(e){return m([].concat(Object(o.a)(h),[Object(i.a)(Object(i.a)({},e.data()),{},{id:e.id})]))})),y(!1)}}),Object(g.jsx)(_.a,{onClick:function(){return y(!0)},className:"ajoutRessource",color:"primary","aria-label":"Ajouter dossier",children:Object(g.jsx)(L.a,{})})]})]}):Object(g.jsx)(U,{})})}s.a.render(Object(g.jsx)(r.a.StrictMode,{children:Object(g.jsx)(ne,{})}),document.getElementById("racine"))}},[[295,1,2]]]);